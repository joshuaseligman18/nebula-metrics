CREATE TABLE PROCESS (
    PID          INT    NOT NULL CHECK(PID >= 1),
    EXEC         TEXT   NOT NULL,
    STARTTIME    INT    NOT NULL CHECK(STARTTIME >= 0),
    ISALIVE      INT    NOT NULL CHECK(ISALIVE IN (0, 1)),
    INITTOTALCPU REAL   NOT NULL CHECK(INITTOTALCPU >= 0),
    PRIMARY KEY (PID)
);

CREATE TABLE CPU (
    CPUCORE     INT NOT NULL CHECK(CPUCORE >= 0),
    MHZ         REAL         CHECK(MHZ >= 0),
    TOTALCACHE  INT          CHECK(TOTALCACHE >= 0),
    PRIMARY KEY (CPUCORE)
);

CREATE TABLE PROCSTAT (
    PID             INT  NOT NULL,
    TIMESTAMP       INT  NOT NULL CHECK(TIMESTAMP >= 0),
    TOTALCPU        REAL NOT NULL CHECK(TOTALCPU >= 0),
    CPUCORE         INT,
    VIRTUALMEMORY   INT  NOT NULL CHECK(VIRTUALMEMORY >= 0),
    RESIDENTMEMORY  INT  NOT NULL CHECK(RESIDENTMEMORY >= 0),
    SHAREDMEMORY    INT  NOT NULL CHECK(SHAREDMEMORY >= 0),
    PRIMARY KEY (PID, TIMESTAMP)
    FOREIGN KEY (PID)     REFERENCES PROCESS(PID),
    FOREIGN KEY (CPUCORE) REFERENCES CPU(CPUCORE)
);

INSERT INTO CPU VALUES (0, 5, 10);
INSERT INTO PROCESS VALUES(1, "systemd", 123456789, 1, 4242);
INSERT INTO PROCESS VALUES(9999999, "test-exe", 123456790, 1, 2048);

INSERT INTO PROCSTAT VALUES(1, 987654321, 5000, 0, 42, 42, 0);
INSERT INTO PROCSTAT VALUES(9999999, 987654321, 5000, 0, 42, 42, 0);
